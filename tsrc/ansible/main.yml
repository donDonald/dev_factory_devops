---
# ansible-playbook -i hosts -K main.yml

- name: Basic setup
  hosts: all
  roles:
    - devtools



- name: DNS servers setup
  hosts: DNS_SERVERS
  roles:
    - dns



- name: DNS clients setup
  hosts: DNS_CLIENTS
  roles:
    - dns_client



- name: Setup docker
  hosts: DOCKER
  roles:
    - python3
    - docker_v2
    - docker_compose_v2



#   - name: Setup PORTAINER - swarm monitoring tool
#     import_playbook: portainer.yml



- name: Setup DOCKPROM - swarm monitoring tool
  import_playbook: dockprom.yml



#   - name: Db servers setup
#     hosts: DB_SERVERS
#     roles:
#       - docker_v2
#       - docker_compose_v2
#       - postgres



####- name: Swarm managers setup
####  hosts: swarm_managers
####  roles:
####    - python3
####    - docker_v2
####    - docker_swarm_manager



####- name: Swarm workers setup
####  hosts: swarm_workers
####  roles:
####    - python3
####    - docker_v2
####    - docker_swarm_worker



####- name: App servers setup
####  hosts: app_servers
####  roles:
####    - docker_swarm_service



####- name: Setup cAdvisor
####  hosts: cadvisor
####  roles:
####    - cadvisor

